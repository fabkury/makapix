<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Makapix Widget Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        
        .artwork-container {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .artwork-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto 20px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .artwork-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        
        .artwork-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .usage-section {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
            margin-top: 40px;
        }
        
        .usage-section h2 {
            color: #333;
            margin-top: 0;
        }
        
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #e0e0e0;
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px 16px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .note strong {
            color: #856404;
        }
    </style>
</head>
<body>
    <header>
        <h1>ðŸŽ¨ Makapix Widget Demo</h1>
        <p class="subtitle">Embeddable comments and reactions for your pixel art</p>
    </header>

    <div class="artwork-container">
        <h2 class="artwork-title">Example Pixel Art</h2>
        <p class="artwork-description">
            This is a demo page showing how the Makapix widget can be embedded
            in any webpage, including GitHub Pages. The widget provides comments
            and reactions that work seamlessly for both authenticated and anonymous users.
        </p>
        
        <!-- Widget Container -->
        <!-- Replace the data-post-id with an actual post ID from your Makapix instance -->
        <div id="makapix-widget" data-post-id="DEMO_POST_ID"></div>
    </div>

    <div class="usage-section">
        <h2>ðŸ“– How to Use</h2>
        
        <h3>1. Basic Integration</h3>
        <p>Add this HTML to your page where you want the widget to appear:</p>
        <pre><code>&lt;div id="makapix-widget" data-post-id="YOUR_POST_ID"&gt;&lt;/div&gt;
&lt;script src="https://makapix.club/makapix-widget.js"&gt;&lt;/script&gt;</code></pre>

        <h3>2. Configuration Options</h3>
        <p>You can customize the API URL by setting a global variable before loading the widget:</p>
        <pre><code>&lt;script&gt;
  window.MAKAPIX_API_URL = 'https://your-custom-domain.com/api';
&lt;/script&gt;
&lt;script src="https://makapix.club/makapix-widget.js"&gt;&lt;/script&gt;</code></pre>

        <h3>3. Features</h3>
        <ul>
            <li><strong>Comments:</strong> Both authenticated and anonymous users can post comments</li>
            <li><strong>Reactions:</strong> Quick emoji reactions (up to 5 per user/post)</li>
            <li><strong>Threaded Discussions:</strong> Support for comment replies (up to 2 levels)</li>
            <li><strong>Guest Names:</strong> Anonymous users get deterministic guest names</li>
            <li><strong>Real-time Updates:</strong> Comments and reactions update instantly</li>
        </ul>

        <div class="note">
            <strong>Note:</strong> Anonymous users cannot edit or delete their comments.
            Only authenticated users with accounts can modify their posts.
        </div>

        <h3>4. Authentication</h3>
        <p>The widget automatically detects if a user is authenticated by checking for a token in localStorage.
        You can integrate Makapix authentication in your site using the OAuth flow:</p>
        <pre><code>// Redirect to Makapix for authentication
window.location.href = 'https://makapix.club/auth/github/login';

// After successful auth, the token will be stored in localStorage
// and the widget will automatically use it</code></pre>

        <h3>5. For GitHub Pages</h3>
        <p>Simply include the widget in your GitHub Pages HTML files. The widget works out of the box
        with proper CORS configuration on the Makapix API server.</p>
        
        <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;My Pixel Art&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img src="my-artwork.png" alt="My Pixel Art"&gt;
    
    &lt;!-- Makapix Widget --&gt;
    &lt;div id="makapix-widget" data-post-id="YOUR_POST_ID"&gt;&lt;/div&gt;
    &lt;script src="https://makapix.club/makapix-widget.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    </div>

    <!-- Load the widget -->
    <script>
        // For local development, point to local API
        window.MAKAPIX_API_URL = 'http://localhost/api';
    </script>
    <script src="/makapix-widget.js"></script>
</body>
</html>

