persistence false
# Disable anonymous access - require authentication
allow_anonymous false
acl_file /mosquitto/config/acls
password_file /mosquitto/config/passwords
log_dest stdout
user root

# Listener for local testing (non-TLS)
listener 1883 0.0.0.0

# TLS listener on port 8883 (for physical devices with client certs)
listener 8883 0.0.0.0
cafile /mosquitto/certs/ca.crt
certfile /mosquitto/certs/server.crt
keyfile /mosquitto/certs/server.key
require_certificate false
tls_version tlsv1.2

# WebSocket listener on port 9001 (for web clients - password auth)
listener 9001 0.0.0.0
protocol websockets
# WebSocket doesn't use client certs, so we'll use password auth
# Note: This is less secure but necessary for browser compatibility
# In production, consider using proper authentication tokens
