# Makapix development environment defaults.
# Copy this file to .env and adjust only if needed.

POSTGRES_USER=appuser
POSTGRES_PASSWORD=apppassword
POSTGRES_DB=appdb
DB_PORT=5432
DATABASE_URL=postgresql+psycopg://appuser:apppassword@db:5432/appdb

REDIS_URL=redis://cache:6379/0
CELERY_BROKER_URL=redis://cache:6379/0
CELERY_RESULT_BACKEND=redis://cache:6379/0

MQTT_HOST=mqtt
MQTT_PORT=8883
MQTT_TLS=true
MQTT_CA_FILE=/certs/ca.crt
MQTT_USERNAME=
MQTT_PASSWORD=
# MQTT Webclient Password (for web browser MQTT connections - must match frontend env)
MQTT_WEBCLIENT_PASSWORD=

API_PORT=8000
WEB_PORT=3000
PROXY_PORT=80

LOG_LEVEL=INFO

# Environment (development, staging, production)
ENVIRONMENT=development

# JWT Token Configuration
# REQUIRED: Generate a secure secret key with: python -c 'import secrets; print(secrets.token_urlsafe(32))'
# This is a development example - MUST be changed for production
JWT_SECRET_KEY=CHANGE_THIS_IN_PRODUCTION_USE_SECURE_RANDOM_KEY
# Access token expires after this many minutes (default: 60 = 1 hour)
# Longer tokens reduce refresh frequency but increase security risk if compromised
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=240
# Refresh token expires after this many days (default: 30)
# Refresh tokens are stored in HttpOnly cookies for security and persistence
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Cookie Configuration (for refresh token storage)
# COOKIE_SECURE: Set to 'true' for HTTPS-only cookies, 'false' for development (auto-detected by default)
# COOKIE_DOMAIN: Cookie domain for subdomain support (auto-detected from request by default)
# COOKIE_SAMESITE: SameSite attribute for CSRF protection (default: 'lax')
# Uncomment these lines only if you need to override auto-detection:
# COOKIE_SECURE=true
# COOKIE_DOMAIN=.makapix.club
# COOKIE_SAMESITE=lax

# CORS Configuration
# Comma-separated list of allowed origins.
# WARNING: Never use "*" in production - it allows any site to make authenticated requests.
# Development: http://localhost:3000,http://localhost
# Production:  https://makapix.club,https://www.makapix.club
CORS_ORIGINS=http://localhost:3000,http://localhost

# GitHub App Configuration (add to your .env file)
# GITHUB_APP_ID=your_github_app_id
# GITHUB_APP_SLUG=your-github-app-slug
# GITHUB_APP_PRIVATE_KEY="your_private_key"
