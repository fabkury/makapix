# GitHub Apps Configuration Needed

You need to create **4 GitHub applications** before you can use the authentication features:

## 1. Local OAuth App
**Create at:** https://github.com/settings/applications/new

- **Application name:** Makapix Local Dev
- **Homepage URL:** `http://localhost`
- **Authorization callback URL:** `http://localhost/auth/github/callback`

**After creation:**
1. Copy the **Client ID**
2. Generate and copy a **Client Secret**
3. Add both to `.env.local`:
   ```
   GITHUB_OAUTH_CLIENT_ID=your_client_id_here
   GITHUB_OAUTH_CLIENT_SECRET=your_client_secret_here
   ```

---

## 2. Local GitHub App
**Create at:** https://github.com/settings/apps/new

- **GitHub App name:** Makapix Local Dev
- **Homepage URL:** `http://localhost`
- **Callback URL:** `http://localhost/auth/github/callback`
- **Setup URL:** `http://localhost/github-app-setup`
- **Webhook URL:** `http://localhost/api/webhooks/github` (or uncheck "Active" to disable)
- **Repository permissions:**
  - Contents: Read & write
  - Pages: Read & write

**After creation:**
1. Note the **App ID**
2. Generate and download the **Private Key** (PEM file)
3. Add both to `.env.local`:
   ```
   GITHUB_APP_ID=your_app_id_here
   GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
   paste_your_private_key_here
   -----END RSA PRIVATE KEY-----"
   ```

---

## 3. Remote OAuth App
**Create at:** https://github.com/settings/applications/new

- **Application name:** Makapix Remote Dev
- **Homepage URL:** `https://dev.makapix.club`
- **Authorization callback URL:** `https://dev.makapix.club/auth/github/callback`

**After creation:**
1. Copy the **Client ID**
2. Generate and copy a **Client Secret**
3. Add both to `.env.remote`:
   ```
   GITHUB_OAUTH_CLIENT_ID=your_client_id_here
   GITHUB_OAUTH_CLIENT_SECRET=your_client_secret_here
   ```

---

## 4. Remote GitHub App
**Create at:** https://github.com/settings/apps/new

- **GitHub App name:** Makapix Remote Dev
- **Homepage URL:** `https://dev.makapix.club`
- **Callback URL:** `https://dev.makapix.club/auth/github/callback`
- **Setup URL:** `https://dev.makapix.club/github-app-setup`
- **Webhook URL:** `https://dev.makapix.club/api/webhooks/github`
- **Repository permissions:**
  - Contents: Read & write
  - Pages: Read & write

**After creation:**
1. Note the **App ID**
2. Generate and download the **Private Key** (PEM file)
3. Add both to `.env.remote`:
   ```
   GITHUB_APP_ID=your_app_id_here
   GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
   paste_your_private_key_here
   -----END RSA PRIVATE KEY-----"
   ```

---

## Quick Checklist

- [ ] Created Local OAuth App
- [ ] Created Local GitHub App
- [ ] Created Remote OAuth App
- [ ] Created Remote GitHub App
- [ ] Updated `.env.local` with local credentials
- [ ] Updated `.env.remote` with remote credentials
- [ ] Tested local environment: `.\dev.ps1 local && .\dev.ps1 up`
- [ ] Tested remote environment (on VPS): `make remote && make up`

---

## Why Do I Need All Four?

Each environment (local and remote) needs:
- **OAuth App** - For user authentication (login with GitHub)
- **GitHub App** - For repository operations (publishing artwork to GitHub Pages)

You cannot use the same apps across environments because:
- GitHub validates callback URLs strictly
- Local uses HTTP, remote uses HTTPS
- Different domains require separate app configurations

